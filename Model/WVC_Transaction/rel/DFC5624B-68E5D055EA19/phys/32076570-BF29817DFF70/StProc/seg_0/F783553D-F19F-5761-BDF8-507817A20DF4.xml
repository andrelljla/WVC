<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="END_ACCOUNT_FOR_FILE_REUSE" directorySegmentName="seg_0" id="F783553D-F19F-5761-BDF8-507817A20DF4">
<sourceConnName>wvc</sourceConnName>
<sourceObjSchema>WVC</sourceObjSchema>
<sourceObjName>END_ACCOUNT_FOR_FILE_REUSE</sourceObjName>
<createdBy>jandrews</createdBy>
<createdTime>2017-06-21 14:53:39 UTC</createdTime>
<ownerDesignName>WVC_Transaction</ownerDesignName>
<owner>201BFD0B-702B-582E-4A1E-3F0CC521546B</owner>
<source>CREATE OR REPLACE procedure WVC.END_ACCOUNT_FOR_FILE_REUSE &lt;br/&gt;(&lt;br/&gt;  accountKey in number &lt;br/&gt;) as&lt;br/&gt;&lt;br/&gt;  exception_dtm       date;&lt;br/&gt;&lt;br/&gt;  lastVisitDateKey    number :=18991231;&lt;br/&gt;&lt;br/&gt;begin&lt;br/&gt;&lt;br/&gt;  -- Get date(key) for last visit&lt;br/&gt;  lastVisitDateKey := get_last_visit_date_key(accountKey);&lt;br/&gt;  &lt;br/&gt;  -- End-date the submitted account&lt;br/&gt;  update account set end_date_key = lastVisitDateKey where account_ID = accountKey;&lt;br/&gt;&lt;br/&gt;exception &lt;br/&gt;  when no_data_found then&lt;br/&gt;    null;&lt;br/&gt;    &lt;br/&gt;  when others then&lt;br/&gt;    select sysdate into exception_dtm from dual;&lt;br/&gt;    dbms_output.put_line(exception_dtm||&apos;, Other Exception in END_ACCOUNT_FOR_FILE_REUSE.&apos;);&lt;br/&gt;    dbms_output.put_line(exception_dtm||&apos;, AccountKey = &apos;||accountKey); &lt;br/&gt;  &lt;br/&gt;end end_account_for_file_reuse;</source>
<body>CREATE OR REPLACE procedure WVC.END_ACCOUNT_FOR_FILE_REUSE &lt;br/&gt;(&lt;br/&gt;  accountKey in number &lt;br/&gt;) as&lt;br/&gt;&lt;br/&gt;  exception_dtm       date;&lt;br/&gt;&lt;br/&gt;  lastVisitDateKey    number :=18991231;&lt;br/&gt;&lt;br/&gt;begin&lt;br/&gt;&lt;br/&gt;  -- Get date(key) for last visit&lt;br/&gt;  lastVisitDateKey := get_last_visit_date_key(accountKey);&lt;br/&gt;  &lt;br/&gt;  -- End-date the submitted account&lt;br/&gt;  update account set end_date_key = lastVisitDateKey where account_ID = accountKey;&lt;br/&gt;&lt;br/&gt;exception &lt;br/&gt;  when no_data_found then&lt;br/&gt;    null;&lt;br/&gt;    &lt;br/&gt;  when others then&lt;br/&gt;    select sysdate into exception_dtm from dual;&lt;br/&gt;    dbms_output.put_line(exception_dtm||&apos;, Other Exception in END_ACCOUNT_FOR_FILE_REUSE.&apos;);&lt;br/&gt;    dbms_output.put_line(exception_dtm||&apos;, AccountKey = &apos;||accountKey); &lt;br/&gt;  &lt;br/&gt;end end_account_for_file_reuse;</body>
</StoredProcedureOraclev10g>