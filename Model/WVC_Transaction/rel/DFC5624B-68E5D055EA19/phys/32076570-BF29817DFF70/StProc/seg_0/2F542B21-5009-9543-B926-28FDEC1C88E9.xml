<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="WRITE_ERROR_LOG" directorySegmentName="seg_0" id="2F542B21-5009-9543-B926-28FDEC1C88E9">
<sourceConnName>wvc</sourceConnName>
<sourceObjSchema>WVC</sourceObjSchema>
<sourceObjName>WRITE_ERROR_LOG</sourceObjName>
<createdBy>jandrews</createdBy>
<createdTime>2017-06-21 14:53:39 UTC</createdTime>
<ownerDesignName>WVC_Transaction</ownerDesignName>
<owner>201BFD0B-702B-582E-4A1E-3F0CC521546B</owner>
<source>CREATE OR REPLACE procedure WVC.WRITE_ERROR_LOG (&lt;br/&gt;  error_code    in integer,&lt;br/&gt;  code_block    in varchar2,&lt;br/&gt;  log_message   in varchar2) is&lt;br/&gt;  &lt;br/&gt;PRAGMA AUTONOMOUS_TRANSACTION;&lt;br/&gt;&lt;br/&gt;cursor c_session is select machine, program from v$session where audsid = userenv(&apos;SESSIONID&apos;);&lt;br/&gt;rec c_session%ROWTYPE;&lt;br/&gt;&lt;br/&gt;--  &lt;br/&gt;-- ParentTrans = Initiating parent transaction&lt;br/&gt;-- ChildTrans = Child Autonomous Transaction&lt;br/&gt;-- &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;BEGIN&lt;br/&gt;&lt;br/&gt;  open c_session;&lt;br/&gt;  fetch c_session into rec;&lt;br/&gt;  close c_session;&lt;br/&gt;&lt;br/&gt;  insert into error_log values (error_code, log_message, sysdate, user, rec.machine, rec.program, code_block);&lt;br/&gt;    &lt;br/&gt;    commit;&lt;br/&gt;    &lt;br/&gt;EXCEPTION&lt;br/&gt;  when others then&lt;br/&gt;    rollback;&lt;br/&gt;&lt;br/&gt;END;</source>
<body>CREATE OR REPLACE procedure WVC.WRITE_ERROR_LOG (&lt;br/&gt;  error_code    in integer,&lt;br/&gt;  code_block    in varchar2,&lt;br/&gt;  log_message   in varchar2) is&lt;br/&gt;  &lt;br/&gt;PRAGMA AUTONOMOUS_TRANSACTION;&lt;br/&gt;&lt;br/&gt;cursor c_session is select machine, program from v$session where audsid = userenv(&apos;SESSIONID&apos;);&lt;br/&gt;rec c_session%ROWTYPE;&lt;br/&gt;&lt;br/&gt;--  &lt;br/&gt;-- ParentTrans = Initiating parent transaction&lt;br/&gt;-- ChildTrans = Child Autonomous Transaction&lt;br/&gt;-- &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;BEGIN&lt;br/&gt;&lt;br/&gt;  open c_session;&lt;br/&gt;  fetch c_session into rec;&lt;br/&gt;  close c_session;&lt;br/&gt;&lt;br/&gt;  insert into error_log values (error_code, log_message, sysdate, user, rec.machine, rec.program, code_block);&lt;br/&gt;    &lt;br/&gt;    commit;&lt;br/&gt;    &lt;br/&gt;EXCEPTION&lt;br/&gt;  when others then&lt;br/&gt;    rollback;&lt;br/&gt;&lt;br/&gt;END;</body>
</StoredProcedureOraclev10g>